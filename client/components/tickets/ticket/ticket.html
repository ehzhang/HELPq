<template name="ticket">
  <div class="animated flipInX
              ui fluid card ticket {{#if statusIs 'CLAIMED'}}claimed{{/if}}">
    <div class="content">
      {{#if userIs 'admin'}}
        <i class="right floated red remove link cancel button icon"></i>
      {{/if}}
      <div class="header">
        {{#if name }}
          {{name}}
        {{else}}
          Somebody
        {{/if}}
      </div>
      <div class="meta">
        <div class="date">
          {{fromNow}}
        </div>
      </div>

      <div class="description">

        {{#if topic}}
          {{topic}}
        {{else}}
          something.
        {{/if}}

        <br>

        ({{location}})

      </div>

      <strong> Contact: </strong>
      {{contact}}

      <br>
      {{#if isExpirable}}
        <small>{{relativeExpirationString}} {{actualExpirationString}}</small>
        <div class="expirationDiv">
          <div style="width: {{formatPercent percentDone}}; background-color: {{getColor percentDone}}" class="expirationBar"></div>
        </div>

      {{/if}}
    </div>
    <div class="extra content">
      {{#if statusIs "OPEN"}}

        {{#if ownsTicket}}
          <div class="right floated author">
            This is you!
          </div>
        {{else}}

          {{#if hasClaimedTicket}}
            <button class="disabled primary fluid push button claim">Claim Ticket</button>
          {{else}}
            <button class="primary fluid push button claim">Claim Ticket</button>
          {{/if}}

        {{/if}}

      {{/if}}

      {{#if statusIs "CLAIMED"}}
        {{#if claimer}}
          <button class="fluid success push button complete">Mark as Complete</button>
          <button class="fluid primary push button reopen">Reopen Ticket</button>
        {{else}}
          <div class="right floated author">
            Claimed by {{claimName}}
          </div>
        {{/if}}
      {{/if}}

    </div>

  </div>
</template>